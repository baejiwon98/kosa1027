<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
	"-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="springBootTest2.mapper.GoodsMapper">

<insert id="goodsInsert" parameterType="springBootTest2.domain.GoodsDTO">
insert into goods(GOODS_NUM, GOODS_NAME, GOODS_PRICE, GOODS_DATE, 
GOODS_CONTENT, GOODS_QTY, GOODS_COMPANY, EMP_NUM, GOODS_IMAGE) 
values(#{goodsNum}, #{goodsName}, #{goodsPrice}, #{goodsDate}, 
#{goodsContent}, #{goodsQty}, #{goodsCompany}, #{empNum}, #{goodsImage})
</insert>	
	
<select id = "numberGenerate" resultType="string">
select concat('kosa', nvl(max(substr(GOODS_NUM,5)),0) + 1) from goods
</select>

<select id = "empnumGenerate" resultType="Integer" parameterType="springBootTest2.domain.GoodsDTO">
select emp_num empNum from employees where emp_id = #{empId}
</select>

<select id="selectAll" resultType="springBootTest2.domain.GoodsDTO">
select GOODS_NUM goodsNum, GOODS_NAME goodsName, GOODS_PRICE goodsPrice, GOODS_DATE goodsDate, 
GOODS_CONTENT goodsContent, GOODS_QTY goodsQty, GOODS_COMPANY goodsCompany, EMP_NUM emp_num, GOODS_IMAGE goodsImage
from goods
</select>

<select id="selectOne" parameterType="String" resultType="springBootTest2.domain.GoodsDTO">
select GOODS_NUM goodsNum, GOODS_NAME goodsName, GOODS_PRICE goodsPrice, GOODS_DATE goodsDate, 
GOODS_CONTENT goodsContent, GOODS_QTY goodsQty, GOODS_COMPANY goodsCompany, EMP_NUM emp_num, GOODS_IMAGE goodsImage
from goods
where goods_num = #{goodsNum}
</select>

<delete id="goodsDel" parameterType="String">
delete from goods
where goods_num = #{goodsNum}
</delete>

<update id="goodsUpdate" parameterType="springBootTest2.domain.GoodsDTO">
	update goods set GOODS_NUM = #{goodsNum}, GOODS_NAME = #{goodsName}, GOODS_PRICE =#{goodsPrice},
	GOODS_DATE = #{goodsDate}, GOODS_CONTENT = #{goodsContent}, GOODS_QTY = #{goodsQty}, 
	GOODS_COMPANY = #{goodsCompany}, EMP_NUM = #{empNum}, GOODS_IMAGE = #{goodsImage}
	where goods_num = #{goodsNum}
</update>

</mapper>