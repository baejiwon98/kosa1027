<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>memberJoinForm</title>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js"></script>
<script type="text/javascript">
$(function(){
	$("#memEmail").keyup(function(){
		$.ajax({
			type : "post",
			url : "emailCheck",
			dataType : "text",
			data : {"memEmail": $("#memEmail").val()},
			success: function(result) {
				$("#emailCheck").html(result);
				if(result == "사용 가능한 email 입니다."){
					$("#emailCheck").css("color", "blue");
				}else{
					$("#emailCheck").css("color", "red");
				}
			},
			error : function() {
				alert('에러');
				return;
			}
		});
	});
	
	$("#memId").keyup(function(){
		$.ajax({
			type : "post",
			url : "idCheck",
			dataType : "text",
			data : {"memId": $("#memId").val()},
			success: function(result) {
				$("#idCheck").html(result);
				if(result == "사용 가능한 id입니다."){
					$("#idCheck").css("color", "blue");
				}else{
					$("#idCheck").css("color", "red");
				}
			},
			error : function() {
				alert('에러');
				return;
			}
		});
	});
});
</script>
</head>
<body>
<form action="memberJoinAction" method = "post" name="frm" id ="frm" th:object="${memberCommand}">
<input type="hidden" name = "memRegiDate" value="1999-12-30" />
<input type="hidden" name = "memNum" value="1234567890" />
<span th:if="${#fields.hasErrors('memRegiDate')}" th:errors="*{memRegiDate}"></span>
<span th:if="${#fields.hasErrors('memNum')}" th:errors="*{memNum}"></span>
<fieldset>
	<legend>회원가입 정보</legend>
	<table width="600" align = "center" border = "1">
		<caption><strong>회원 가입</strong></caption>
		<tfoot>
		<tr>
			<th colspan="2">
			<input type="submit" value="가입완료"> &nbsp;&nbsp;
			<input type="reset" value="다시 입력"> &nbsp;&nbsp;
			<input type="button" value="가입 안함" onclick="javascript:location.href='/'" />
			</th>
		</tr>
		</tfoot>
		<tbody>
		<tr>
			<th colspan="2">사용자 ID와 비밀번호 입력</th>
		</tr>
		<tr>
			<th>
				<label for="memId">* 사용자 아이디</label>
			</th>
			<td>
				<input type="text" name="memId" id = "memId"
				size="15" maxlength="12" autofocus="autofocus" th:value="${memberCommand.memId }" />
				<span id = "idCheck"></span>
				<span th:if="${#fields.hasErrors('memId')}" th:errors="*{memId}"></span>
			</td>
		</tr>
		<tr>
			<th>
				<label for="memPw">비밀번호</label>
			</th>
			<td>
				<input type="password" name="memPw" id="memPw"
				size="15" maxlength="12" />
				<span th:if="${#fields.hasErrors('memPw')}" th:errors="*{memPw}"></span>
			</td>
		</tr>
			<tr>
			<th>
				<label for="memPwCon">비밀번호 확인</label>
			</th>
			<td>
				<input type="password" name="memPwCon" id="memPwCon"
				size="15" maxlength="12" />
				<span th:if="${#fields.hasErrors('memPwCon')}" th:errors="*{memPwCon}"></span>
			</td>
		</tr>
		<tr>
			<th colspan="2">사용자 기본 정보</th>
		</tr>
		<tr>
			<th>
				<label for="memName">사용자 이름</label>
			</th>
			<td>
				<input type="text" name="memName" id="memName"
				size="15" maxlength="12" th:value="${memberCommand.memName }" />
				<span th:if="${#fields.hasErrors('memName')}" th:errors="*{memName}"></span>
			</td>
		</tr>
		<tr>
			<th>
				<label for="memBirth">생년월일</label>
			</th>
			<td>
				<input type="date" name="memBirth" id="memBirth" placeholder="1999-12-30" th:value="${#dates.format(memberCommand.memBirth,'yyyy-MM-dd') }"/>
				<span th:if="${#fields.hasErrors('memBirth')}" th:errors="*{memBirth}" ></span>
			</td>
		</tr>
		<tr>
			<th>성별</th>
			<td>
				<input type="radio" name="memGender" value="M" th:checked ="${memberCommand.memGender=='M'}"/>남자
				<input type="radio" name="memGender" value="F" th:checked ="${memberCommand.memGender=='F'}"/>여자
				<span th:if="${#fields.hasErrors('memGender')}" th:errors="*{memGender}" ></span>
			</td>
		</tr>
		<tr>
			<th colspan="2">사용자 연락처</th>
		</tr>
		<tr>
			<th>
				<label for="memEmail">사용자 이메일</label>
			</th>
			<td>
				<input type="email" name="memEmail" id="memEmail" th:value="${memberCommand.memEmail }"/>
				<span id = "emailCheck"></span>
				<span th:if="${#fields.hasErrors('memEmail')}" th:errors="*{memEmail}"></span>
			</td>
		</tr>
		<tr>
			<th>
				<label for="memAddr">사용자 주소</label>
			</th>
			<td>
				<input type="text" name="memAddr" id="memAddr" th:value="${memberCommand.memAddr }"/>
				<span th:if="${#fields.hasErrors('memAddr')}" th:errors="*{memAddr}"></span>
			</td>
		</tr>
		<tr>
			<th>
				<label for="memPhone">연락처</label>
			</th>
			<td>
				<input type="tel" size="26" maxlength="13" name="memPhone" id="memPhone"
				placeholder="123-123-1234, 123-1234-1234" th:value="${memberCommand.memPhone }"/>
				<span th:if="${#fields.hasErrors('memPhone')}" th:errors="*{memPhone}"></span>
			</td>
		</tr>
		</tbody>
	</table>
</fieldset>
</form>
</body>
</html>